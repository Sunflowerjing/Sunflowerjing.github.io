(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{273:function(v,_,l){"use strict";l.r(_);var t=l(0),i=Object(t.a)({},(function(){var v=this,_=v.$createElement,l=v._self._c||_;return l("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[l("h1",{attrs:{id:"小程序监控体系"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#小程序监控体系"}},[v._v("#")]),v._v(" 小程序监控体系")]),v._v(" "),l("ul",[l("li",[l("code",[v._v("监控流程")]),v._v("：监控错误 -> 搜集错误 -> 存储错误 -> 分析错误 -> 错误报警-> 定位错误 -> 解决错误")])]),v._v(" "),l("ol",[l("li",[l("p",[v._v("监控的"),l("code",[v._v("优点")]),v._v("?")]),v._v(" "),l("ul",[l("li",[v._v("针对线上问题: 及时"),l("code",[v._v("发现、定位、解决，减少影响用户数")]),v._v("。")]),v._v(" "),l("li",[v._v("有一个系统能"),l("code",[v._v("收集用户的使用信息")]),v._v("。辅助问题的定位与修复，减少开发人员的负担，那么小程序监控就非常有必要了。")])])]),v._v(" "),l("li",[l("p",[v._v("小程序监控方案分类:")]),v._v(" "),l("ul",[l("li",[v._v("应用运营状态监控:\n"),l("ul",[l("li",[l("code",[v._v("用户数据监控")]),v._v("：新增用户数、访问次数、用户留存率等数据。")])])]),v._v(" "),l("li",[v._v("应用质量监控:\n"),l("ul",[l("li",[l("code",[v._v("错误监控")]),v._v("：\n"),l("ul",[l("li",[v._v("网络请求:\n"),l("ol",[l("li",[v._v("API 成功率(通过 hack 的方式获取到请求发起的状态及请求返回后的状态，从而计算到 API 的成功率及耗时情况)")]),v._v(" "),l("li",[v._v("定位问题：全链路追踪")])])]),v._v(" "),l("li",[v._v("页面报错")])])]),v._v(" "),l("li",[l("code",[v._v("性能监控")]),v._v("：微信官方提供。\n"),l("ul",[l("li",[v._v("app启动时间")]),v._v(" "),l("li",[v._v("各类函数(wx系统，app.js，page)的执行时间及页面渲染时间")]),v._v(" "),l("li",[v._v("性能数据（cpu, fps, mem）")])])])])])])]),v._v(" "),l("li",[l("p",[v._v("公司现有监控体系梳理\n")]),l("style",[v._v("\ntable th:first-of-type {\nwidth: 15%;\n}\ntable th:nth-of-type(2) {\nwidth: 25%;\n}\ntable th:nth-of-type(3) {\nwidth: 30%;\n}\ntable th:nth-of-type(4) {\nwidth: 40%;\n}\n")]),l("p"),v._v(" "),l("table",[l("thead",[l("tr",[l("th",[v._v("平台")]),v._v(" "),l("th",[v._v("用户数据监控")]),v._v(" "),l("th",[v._v("错误监控")]),v._v(" "),l("th",[v._v("性能监控")])])]),v._v(" "),l("tbody",[l("tr",[l("td",[v._v("旧小程序")]),v._v(" "),l("td",[v._v("Qmark")]),v._v(" "),l("td",[v._v("apm")]),v._v(" "),l("td",[v._v("错误查询、实时日志、性能监控、告警设置、小程序测速"),l("br"),v._v("微信官方收集")])]),v._v(" "),l("tr",[l("td",[v._v("RN")]),v._v(" "),l("td",[v._v("无")]),v._v(" "),l("td",[v._v("崩溃、卡顿、错误 "),l("br"),v._v(" apm")]),v._v(" "),l("td",[v._v("埋点: 达芬奇")])]),v._v(" "),l("tr",[l("td",[v._v("大客户端")]),v._v(" "),l("td",[v._v("点击、页面跳转、崩溃  "),l("br"),v._v(" apm")]),v._v(" "),l("td",[v._v("页面、服务不可用 "),l("br"),v._v(" apm")]),v._v(" "),l("td",[v._v("启动时长、加载时长、请求时长 "),l("br"),v._v(" 达芬奇、qlibra")])]),v._v(" "),l("tr",[l("td",[v._v("新小程序")]),v._v(" "),l("td",[v._v("埋点"),l("br"),v._v("统计 pv、uv")]),v._v(" "),l("td",[v._v("页面: js 异常 （崩溃）app.js中的方法")]),v._v(" "),l("td")])])])])]),v._v(" "),l("p",[l("br"),v._v("服务不可用: 400、500实现方案埋点(错误)"),l("br"),v._v(" 卡顿: 机制(调用系统方法，>500 为卡顿 ) | 接口耗时（埋点）"),l("br"),v._v("启动（埋点）: 点击 - 加载 - 可见  |")]),v._v(" "),l("ol",{attrs:{start:"4"}},[l("li",[l("p",[v._v("实现人员")]),v._v(" "),l("ul",[l("li",[v._v("公共产研"),l("code",[v._v("前端框架组")]),v._v(": SDK")]),v._v(" "),l("li",[v._v("公共产研"),l("code",[v._v("APM组")]),v._v(": 统计数据")]),v._v(" "),l("li",[v._v("公共产研发"),l("code",[v._v("数据组")]),v._v(": 统计数据")])])]),v._v(" "),l("li",[l("p",[v._v("详细实现方案")]),v._v(" "),l("ul",[l("li",[v._v("用户数据监控:\n"),l("ul",[l("li",[v._v("小程序 SDK")]),v._v(" "),l("li",[v._v("数据对比: 访问人数，新访问人数、总添加人数、新添加人数")]),v._v(" "),l("li",[v._v("用户行为：分析转化率、用户流失")])])]),v._v(" "),l("li",[v._v("错误监控:\n"),l("ul",[l("li",[v._v("运行时报错: 页面异常wx.onError(function callback)\n"),l("ul",[l("li",[v._v("语法错误")]),v._v(" "),l("li",[v._v("引用错误")]),v._v(" "),l("li",[v._v("类型错误")]),v._v(" "),l("li",[v._v("范围越界错误")]),v._v(" "),l("li",[v._v("URL 不正确\n资源上传下载错误")])])]),v._v(" "),l("li",[v._v("卡顿(例如点击按钮的卡顿): 主线程设置 setTimeout")]),v._v(" "),l("li",[v._v("服务不可以用: 埋点\n"),l("ul",[l("li",[v._v("http 请求错误")]),v._v(" "),l("li",[v._v("请求返回的 statusCode 不是200时")]),v._v(" "),l("li",[v._v("request的 fail 回调函数被触发时")]),v._v(" "),l("li",[v._v("当发生以上事件时，存储两部分日志，一个是请求的堆栈信息，一个是事件请求的全部信息，包括请求头部，请求方式，请求参数，请求地址等。")])])]),v._v(" "),l("li",[v._v("异常处理(结果!=正确值。不影响用户使用，但不应该发生的):")])])]),v._v(" "),l("li",[v._v("性能监控\n"),l("ul",[l("li",[v._v("启动时长")]),v._v(" "),l("li",[v._v("首屏渲染: 首屏渲染 时长不超过5秒\n"),l("ul",[l("li",[v._v("首屏渲染内容多，优先级高的内容做优先展示")]),v._v(" "),l("li",[v._v("首屏内容依赖的数据从服务端请求的时间太长。")])])]),v._v(" "),l("li",[v._v("页面渲染时间\n"),l("ul",[l("li",[v._v("首次渲染或因数据变化带来的页面结构变化的渲染花费的时间")])])])])])])])])])}),[],!1,null,null,null);_.default=i.exports}}]);