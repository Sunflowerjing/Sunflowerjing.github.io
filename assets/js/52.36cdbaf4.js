(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{249:function(t,a,s){"use strict";s.r(a);var n=s(0),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"react进阶1"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#react进阶1"}},[t._v("#")]),t._v(" React进阶1")]),t._v(" "),s("h2",{attrs:{id:"react生命周期"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#react生命周期"}},[t._v("#")]),t._v(" React生命周期")]),t._v(" "),s("p",[s("img",{attrs:{src:"react%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.png",alt:"React生命周期"}})]),t._v(" "),s("ol",[s("li",[s("p",[t._v("概念")]),t._v(" "),s("ul",[s("li",[t._v("存在: "),s("code",[t._v("类组件")]),t._v("存在生命周期函数")]),t._v(" "),s("li",[t._v("生命周期: 从创建 到 销毁 的一个过程")])])]),t._v(" "),s("li",[s("p",[t._v("挂载阶段")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("constructor(props)")]),t._v(" "),s("ul",[s("li",[t._v("接收父组件 super(props)")]),t._v(" "),s("li",[t._v("初始化操作: this 绑定, state")])])]),t._v(" "),s("li",[s("code",[t._v("componentWillMount")]),t._v(" "),s("ul",[s("li",[t._v("组件即将挂载, render 之前调用")]),t._v(" "),s("li",[s("code",[t._v("只会调用一次")]),t._v("。 有可能调用 2 次, 在 "),s("code",[t._v("SSR 项目")]),t._v("中, 服务端调用一次, 客户端调用一次")]),t._v(" "),s("li",[t._v("很少使用")]),t._v(" "),s("li",[t._v("调用 setState 不会引起重新渲染")]),t._v(" "),s("li",[t._v("使用同步的 setState , 不会触发额外的 render 处理")]),t._v(" "),s("li",[t._v("16.3 版本, 标记过时生命周期。"),s("code",[t._v("UNSAFE_componentWillMount()")])]),t._v(" "),s("li",[t._v("产生副作用, 或者订阅")])])]),t._v(" "),s("li",[s("code",[t._v("render")]),t._v(" "),s("ul",[s("li",[t._v("唯一必要方法")]),t._v(" "),s("li",[t._v("根据 state、props 返回一个 react 元素, 描述组件 UI")]),t._v(" "),s("li",[t._v("不负责组件的实际渲染工作, 只是返回一个 UI 的描述, 返回 JSX 元素")]),t._v(" "),s("li",[t._v("注意:\n"),s("ul",[s("li",[t._v("必须是一个纯函数, 在这里不能改变 state setState, 不能执行任何有副作用的操作")])])]),t._v(" "),s("li",[t._v("作用\n"),s("ul",[s("li",[t._v("计算 props/state 返回对应的结果")]),t._v(" "),s("li",[t._v("用 React.createElement() 将 JSX 转换为 Virtual DOM 对象模型")])])])])]),t._v(" "),s("li",[s("code",[t._v("componentDidlMount")]),t._v(" "),s("ul",[s("li",[t._v("组件挂载到 DOM 后触发, 只会调用一次.")]),t._v(" "),s("li",[t._v("因为获取到 DOM 结构了, 依赖 DOM 节点操作, 就可以放到该方法中了。")]),t._v(" "),s("li",[t._v("能够获取到真实的 DOM, "),s("code",[t._v("setState 引起组件重新渲染")])]),t._v(" "),s("li",[t._v("向服务端请求数据\n"),s("ul",[s("li",[t._v("可以保证获取到数据时, 组件已经处于挂载阶段。直接操作 DOM, 初始化第三方库。")]),t._v(" "),s("li",[t._v("保证在任何情况下，只会调用一次, 不会发送多余的数据请求。")])])]),t._v(" "),s("li",[t._v("只能在浏览器端请求数据\n"),s("ul",[s("li",[t._v("服务端不可能产生 DOM")])])]),t._v(" "),s("li",[t._v("作用\n"),s("ul",[s("li",[t._v("数据可以获取到, 真实的 DOM 也可以获取到")]),t._v(" "),s("li",[t._v("可以进行数据请求, 进行数据修改")]),t._v(" "),s("li",[t._v("操作真实的 DOM, 第三方库实例化")])])])])])])]),t._v(" "),s("li",[s("p",[t._v("更新阶段")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("UNSAFE_componentWillReceiveProps(nextProps)")]),t._v(" "),s("ul",[s("li",[t._v("组件将要接收 props")]),t._v(" "),s("li",[t._v("props 引起的组件更新过程中, 会触发此生命周期函数")]),t._v(" "),s("li",[t._v("this.setState 即 state 改变, 不会触发此函数. 但是可以调用 setState")]),t._v(" "),s("li",[t._v("只要父组件的 render 函数被调用, 无论父组件传递给子组件的 props 有没有改变, 都会触发。")]),t._v(" "),s("li",[t._v("挂载阶段触发 props, 不会触发此函数")]),t._v(" "),s("li",[t._v("官方建议用 "),s("code",[t._v("static getDerivedStateFromProps(props, state)")]),t._v(" 此方法替代\n"),s("ul",[s("li",[t._v("会在调用 "),s("code",[t._v("render")]),t._v(" 方法之前调用")]),t._v(" "),s("li",[t._v("并且在"),s("code",[t._v("初始挂载")]),t._v("及后续更新时都会被调用")]),t._v(" "),s("li",[t._v("它应"),s("code",[t._v("返回一个对象来更新 state")]),t._v("，如果返回 null 则不更新任何内容。")])])])])]),t._v(" "),s("li",[s("code",[t._v("shouldComponentUpdate(nextProps, nextState) false")]),t._v(" 比较重要\n"),s("ul",[s("li",[t._v("通知 react 组件是否更新, 有权利阻止更新")]),t._v(" "),s("li",[t._v("react 默认状态改变, 组件重新渲染")]),t._v(" "),s("li",[t._v("尽量遵循默认行为, 状态改变, 组件就会被重新渲染")]),t._v(" "),s("li",[t._v("要求必须有返回结果")]),t._v(" "),s("li",[t._v("决定视图是否渲染, true 渲染视图, false 视图不渲染。必须要有这个返回值"),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 判断 下次更新值和这次更新值相等, 则不进行渲染。")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 例如: 父组件渲染，子组件值没有改变。则不进行子组件渲染")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nextProps"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props属性名 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("属性名 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" nextState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state属性名 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("属性名"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),s("li",[t._v("减少组件不必要的渲染, 提高性能")]),t._v(" "),s("li",[t._v("不能调用 setState")])])]),t._v(" "),s("li",[s("code",[t._v("UNSAFE_componentWillUpdate(nextProps, nextState)")]),t._v(" "),s("ul",[s("li",[t._v("更新发生前, 一般很少用")]),t._v(" "),s("li",[t._v("不能调用 setState")])])]),t._v(" "),s("li",[s("code",[t._v("componentDidlUpdate(prevProps, prevState)")]),t._v(" "),s("ul",[s("li",[t._v("更新完成调用")]),t._v(" "),s("li",[t._v("接收2个参数, 之前的属性 和 之前的状态")]),t._v(" "),s("li",[t._v("有机会来操作 DOM")]),t._v(" "),s("li",[t._v("判断是否发送网络请求 (做好条件比较)")]),t._v(" "),s("li",[t._v("适合发送网络请求")]),t._v(" "),s("li",[t._v("无论父组件 props 改变还是 state 的修改, 都会触发该方法。")])])])])]),t._v(" "),s("li",[s("p",[t._v("卸载阶段")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("componentWillUnmount")]),t._v(" "),s("ul",[s("li",[t._v("在组件被卸载并销毁之前立即被调用。在此方法中执行必要的清理。")]),t._v(" "),s("li",[t._v("做一些清理工作")]),t._v(" "),s("li",[t._v("定时器, 取消网络请求, 移出事件监听")])])])])]),t._v(" "),s("li",[s("p",[t._v("错误处理阶段")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("componentDidCatch(error, info)")]),t._v(" "),s("ul",[s("li",[t._v("错误的捕获")])])])])]),t._v(" "),s("li",[s("p",[t._v("版本变化")]),t._v(" "),s("ul",[s("li",[t._v("15 版本\n"),s("ul",[s("li",[t._v("存在: 挂载阶段, 更新阶段, 卸载阶段")])])]),t._v(" "),s("li",[t._v("16 版本\n"),s("ul",[s("li",[t._v("添加 错误处理阶段")])])])])])]),t._v(" "),s("h2",{attrs:{id:"受控组件与非受控组件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#受控组件与非受控组件"}},[t._v("#")]),t._v(" 受控组件与非受控组件")]),t._v(" "),s("ol",[s("li",[s("code",[t._v("表单")]),t._v("(受控组件与非受控组件) 针对表单而言的\n"),s("ul",[s("li",[t._v("受控组件(可控组件)\n"),s("ul",[s("li",[t._v("表单元素依赖状态, 默认值实时映射到状态 state")]),t._v(" "),s("li",[t._v("通过 "),s("code",[t._v("state")]),t._v(" 管理表单元素中的值。")]),t._v(" "),s("li",[t._v("在 Input 中修改 value 表单元素中的值, 来修改 state")]),t._v(" "),s("li",[t._v("必须使用 "),s("code",[t._v("onChange")]),t._v(" 事件, 来获取值的改变, 对值的一些处理")]),t._v(" "),s("li",[t._v("不使用 "),s("code",[t._v("onChange")]),t._v(" 事件, 则无法对值进行更改。")]),t._v(" "),s("li",[t._v("双向绑定类似")]),t._v(" "),s("li",[t._v("每当表单组件变化时, 都会写入表单组件的 state 中。即称为受控组件")]),t._v(" "),s("li",[t._v("代码")])]),t._v(" "),s("div",{staticClass:"language-JavaScript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        userName"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'受控组件默认值'")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("handelChange")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// e 事件对象")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        userName"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("input type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"text"')]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("userName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" onChange"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("handelChange"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),s("ul",[s("li",[t._v("优点\n"),s("ul",[s("li",[t._v("符合 react 的数据流")]),t._v(" "),s("li",[t._v("修改使用更加方便, 完全不需要获取 DOM")]),t._v(" "),s("li",[t._v("便于数据处理")])])])])]),t._v(" "),s("li",[t._v("非受控组件(非可控组件)\n"),s("ul",[s("li",[t._v("不通过 "),s("code",[t._v("state")]),t._v(" 管理表单元素中的值, 就是非受控的")]),t._v(" "),s("li",[t._v("不受控制 获取 DOM, 操作 DOM. 通过 ref")]),t._v(" "),s("li",[t._v("好处很容易与第三方组件结合")]),t._v(" "),s("li",[t._v("代码")])]),t._v(" "),s("div",{staticClass:"language-JavaScript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" inputRef "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" React"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createRef")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("handelChange")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'接收子组件的值'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" inputRef"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("            \n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("input type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"text"')]),t._v(" ref"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("inputRef"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" defaultVaule"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"我是非受控组件的默认值"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),s("ul",[s("li",[t._v("React 中表单元素 与 原生 HTML 表单元素有些不同")])]),t._v(" "),s("div",{staticClass:"language-JavaScript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// html")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("textarea"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("内容 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("textarea"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// DOM")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("handTxtChange")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("state")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        txtVal"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("textarea value"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("txtVal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" onChange"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("handTxtChange"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])])])])])]),t._v(" "),s("h2",{attrs:{id:"react中的事件和this"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#react中的事件和this"}},[t._v("#")]),t._v(" react中的事件和This")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("React 中的事件")]),t._v(" "),s("ul",[s("li",[t._v("直接写在 JSX 中, 不需要像原生 js 一样用 addEventListener 绑定")]),t._v(" "),s("li",[s("code",[t._v("on+EventType(事件类型)")]),t._v(" "),s("code",[t._v("onClick")]),t._v(" "),s("code",[t._v("onChange")]),t._v(" "),s("code",[t._v("onBlur")]),t._v(" => 驼峰式写法\n"),s("ul",[s("li",[t._v("以上方法只能加在原生 HTML 标签中, 不能加在自定义组件标签中")]),t._v(" "),s("li",[t._v("阻止默认行为: 显示调用"),s("code",[t._v("event.preventDefault")])]),t._v(" "),s("li",[t._v("event: 是 React 的一个封装, 对外暴露了一些接口。不是原生 JavaScript")])])])])]),t._v(" "),s("li",[s("p",[t._v("事件监听 this")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("constructor bind")]),t._v("   推荐")]),t._v(" "),s("li",[s("code",[t._v("ES6 类字段 箭头函数")]),t._v("   推荐")]),t._v(" "),s("li",[t._v("render 直接bind")]),t._v(" "),s("li",[t._v("render 箭头函数")]),t._v(" "),s("li",[s("code",[t._v("推荐前2种方式。后面2种有性能的问题, 会造成重新渲染。")])])])]),t._v(" "),s("li",[s("p",[t._v("事件传参")]),t._v(" "),s("ul",[s("li",[t._v("传递 "),s("code",[t._v("id")]),t._v(" 或者 "),s("code",[t._v("索引")]),t._v(" "),s("ul",[s("li",[t._v("不得不使用, 在 render 中用 bind 和 箭头函数。")])])]),t._v(" "),s("li",[t._v("bind\n"),s("ul",[s("li",[t._v("传值 event 在后面: "),s("code",[t._v("handleBtnClick(params, event)")])])]),t._v(" "),s("div",{staticClass:"language-JavaScript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// bind, 传递 event 在后面")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleBtnClick")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("params"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" event")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 第一个参数 params, 传递的值")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 第二个参数 event, 事件对象")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'我是参数传递的值'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" params"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button onClick"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleBtnClick")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bind")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'传递的参数-jing'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("传递参数"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])])]),t._v(" "),s("li",[t._v("箭头函数\n"),s("ul",[s("li",[t._v("传值 event 在前面: "),s("code",[t._v("handleBtnClick(event, params)")])])]),t._v(" "),s("div",{staticClass:"language-JavaScript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 箭头函数, 传递 event 在前面")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleBtnClick")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" params")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 第一个参数 event, 事件对象")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 第二个参数 params, 传递的值")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'我是参数传递的值'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" params"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button onClick"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleBtnClick")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'传递的参数-jing'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("传递参数"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])])])])])])])}),[],!1,null,null,null);a.default=e.exports}}]);