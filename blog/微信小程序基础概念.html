<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>微信小程序基础概念 | Sunflower</title>
    <meta name="description" content="Vuepress blog demo">
    
    
    <link rel="preload" href="/assets/css/0.styles.a32d750b.css" as="style"><link rel="preload" href="/assets/js/app.0c4e457a.js" as="script"><link rel="preload" href="/assets/js/2.3676e543.js" as="script"><link rel="preload" href="/assets/js/88.45337485.js" as="script"><link rel="prefetch" href="/assets/js/10.f6453fe8.js"><link rel="prefetch" href="/assets/js/100.0199c719.js"><link rel="prefetch" href="/assets/js/101.a7de43f8.js"><link rel="prefetch" href="/assets/js/102.50f8644c.js"><link rel="prefetch" href="/assets/js/103.3250c02d.js"><link rel="prefetch" href="/assets/js/104.29d7ed21.js"><link rel="prefetch" href="/assets/js/105.d7e9fbbd.js"><link rel="prefetch" href="/assets/js/106.1b5d8416.js"><link rel="prefetch" href="/assets/js/107.76dc1544.js"><link rel="prefetch" href="/assets/js/108.b3902295.js"><link rel="prefetch" href="/assets/js/109.d850dd61.js"><link rel="prefetch" href="/assets/js/11.60034940.js"><link rel="prefetch" href="/assets/js/110.a069f797.js"><link rel="prefetch" href="/assets/js/111.09024681.js"><link rel="prefetch" href="/assets/js/112.8b344d0d.js"><link rel="prefetch" href="/assets/js/113.d595799f.js"><link rel="prefetch" href="/assets/js/114.735747e0.js"><link rel="prefetch" href="/assets/js/115.4633d9d2.js"><link rel="prefetch" href="/assets/js/116.a13bf6e2.js"><link rel="prefetch" href="/assets/js/117.5ea5c11f.js"><link rel="prefetch" href="/assets/js/118.a476151d.js"><link rel="prefetch" href="/assets/js/119.5818c676.js"><link rel="prefetch" href="/assets/js/12.5bd43cd0.js"><link rel="prefetch" href="/assets/js/120.b161186b.js"><link rel="prefetch" href="/assets/js/121.b9f099e4.js"><link rel="prefetch" href="/assets/js/122.bc15ed2f.js"><link rel="prefetch" href="/assets/js/123.99d76580.js"><link rel="prefetch" href="/assets/js/124.c7ab2894.js"><link rel="prefetch" href="/assets/js/125.34cfb3f5.js"><link rel="prefetch" href="/assets/js/126.58a7e447.js"><link rel="prefetch" href="/assets/js/127.1c85bd46.js"><link rel="prefetch" href="/assets/js/13.66d25018.js"><link rel="prefetch" href="/assets/js/14.a25a4035.js"><link rel="prefetch" href="/assets/js/15.de39ab23.js"><link rel="prefetch" href="/assets/js/16.6d1bca0b.js"><link rel="prefetch" href="/assets/js/17.128d4594.js"><link rel="prefetch" href="/assets/js/18.0a3fd68b.js"><link rel="prefetch" href="/assets/js/19.b607c382.js"><link rel="prefetch" href="/assets/js/20.d31afd49.js"><link rel="prefetch" href="/assets/js/21.12acfd86.js"><link rel="prefetch" href="/assets/js/22.aadfbdc4.js"><link rel="prefetch" href="/assets/js/23.a0edc35a.js"><link rel="prefetch" href="/assets/js/24.b312e6df.js"><link rel="prefetch" href="/assets/js/25.97257d75.js"><link rel="prefetch" href="/assets/js/26.01936dd2.js"><link rel="prefetch" href="/assets/js/27.2e8828b4.js"><link rel="prefetch" href="/assets/js/28.e6790ba9.js"><link rel="prefetch" href="/assets/js/29.afc524f3.js"><link rel="prefetch" href="/assets/js/3.a9dffec4.js"><link rel="prefetch" href="/assets/js/30.aaf7c6de.js"><link rel="prefetch" href="/assets/js/31.9d65cff2.js"><link rel="prefetch" href="/assets/js/32.c894558d.js"><link rel="prefetch" href="/assets/js/33.8d8bd986.js"><link rel="prefetch" href="/assets/js/34.47facfd4.js"><link rel="prefetch" href="/assets/js/35.44ceb585.js"><link rel="prefetch" href="/assets/js/36.09f2f739.js"><link rel="prefetch" href="/assets/js/37.dbbc0e60.js"><link rel="prefetch" href="/assets/js/38.c1fad2a0.js"><link rel="prefetch" href="/assets/js/39.3ace24fd.js"><link rel="prefetch" href="/assets/js/4.2810ddf2.js"><link rel="prefetch" href="/assets/js/40.63374265.js"><link rel="prefetch" href="/assets/js/41.fd064420.js"><link rel="prefetch" href="/assets/js/42.57958530.js"><link rel="prefetch" href="/assets/js/43.c7cf35eb.js"><link rel="prefetch" href="/assets/js/44.e0cb951b.js"><link rel="prefetch" href="/assets/js/45.b223bdd3.js"><link rel="prefetch" href="/assets/js/46.c7b31626.js"><link rel="prefetch" href="/assets/js/47.3e4a6728.js"><link rel="prefetch" href="/assets/js/48.94b07616.js"><link rel="prefetch" href="/assets/js/49.fdf42941.js"><link rel="prefetch" href="/assets/js/5.e43498e1.js"><link rel="prefetch" href="/assets/js/50.cbed56b5.js"><link rel="prefetch" href="/assets/js/51.a18a4733.js"><link rel="prefetch" href="/assets/js/52.36cdbaf4.js"><link rel="prefetch" href="/assets/js/53.811cfd3f.js"><link rel="prefetch" href="/assets/js/54.83f3bd55.js"><link rel="prefetch" href="/assets/js/55.31ab89db.js"><link rel="prefetch" href="/assets/js/56.6c9598cc.js"><link rel="prefetch" href="/assets/js/57.d3a59dd5.js"><link rel="prefetch" href="/assets/js/58.4e4fc0d8.js"><link rel="prefetch" href="/assets/js/59.0266534d.js"><link rel="prefetch" href="/assets/js/6.8caa4cbe.js"><link rel="prefetch" href="/assets/js/60.d11b5ae3.js"><link rel="prefetch" href="/assets/js/61.741b1b34.js"><link rel="prefetch" href="/assets/js/62.20d137ff.js"><link rel="prefetch" href="/assets/js/63.8187c722.js"><link rel="prefetch" href="/assets/js/64.22cc7bfe.js"><link rel="prefetch" href="/assets/js/65.cc03ac65.js"><link rel="prefetch" href="/assets/js/66.cea322b8.js"><link rel="prefetch" href="/assets/js/67.72dd099a.js"><link rel="prefetch" href="/assets/js/68.f1b29a3d.js"><link rel="prefetch" href="/assets/js/69.77b58a41.js"><link rel="prefetch" href="/assets/js/7.87b373df.js"><link rel="prefetch" href="/assets/js/70.e6f55243.js"><link rel="prefetch" href="/assets/js/71.791e674e.js"><link rel="prefetch" href="/assets/js/72.38dfb769.js"><link rel="prefetch" href="/assets/js/73.bddf3f06.js"><link rel="prefetch" href="/assets/js/74.580447a5.js"><link rel="prefetch" href="/assets/js/75.13d0b306.js"><link rel="prefetch" href="/assets/js/76.2f8ecead.js"><link rel="prefetch" href="/assets/js/77.253ab4eb.js"><link rel="prefetch" href="/assets/js/78.eb589711.js"><link rel="prefetch" href="/assets/js/79.5b90567a.js"><link rel="prefetch" href="/assets/js/8.30d27849.js"><link rel="prefetch" href="/assets/js/80.bedfdf65.js"><link rel="prefetch" href="/assets/js/81.a68c6528.js"><link rel="prefetch" href="/assets/js/82.a37cd94a.js"><link rel="prefetch" href="/assets/js/83.8e32436f.js"><link rel="prefetch" href="/assets/js/84.ace16e95.js"><link rel="prefetch" href="/assets/js/85.86afda5c.js"><link rel="prefetch" href="/assets/js/86.fb04cb29.js"><link rel="prefetch" href="/assets/js/87.c58c2d4c.js"><link rel="prefetch" href="/assets/js/89.8b51f007.js"><link rel="prefetch" href="/assets/js/9.2d4820b7.js"><link rel="prefetch" href="/assets/js/90.6d9c1756.js"><link rel="prefetch" href="/assets/js/91.723d3e38.js"><link rel="prefetch" href="/assets/js/92.08564d2f.js"><link rel="prefetch" href="/assets/js/93.04edcdea.js"><link rel="prefetch" href="/assets/js/94.42a83ef8.js"><link rel="prefetch" href="/assets/js/95.46df9ab9.js"><link rel="prefetch" href="/assets/js/96.39a45b87.js"><link rel="prefetch" href="/assets/js/97.985d9133.js"><link rel="prefetch" href="/assets/js/98.879aeb93.js"><link rel="prefetch" href="/assets/js/99.36965454.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a32d750b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Sunflower</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">博客</a></div><div class="nav-item"><a href="/scattered/" class="nav-link">零散知识</a></div><div class="nav-item"><a href="/book/" class="nav-link">阅读</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div> <a href="https://github.com/Sunflowerjing/Sunflowerjing.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">博客</a></div><div class="nav-item"><a href="/scattered/" class="nav-link">零散知识</a></div><div class="nav-item"><a href="/book/" class="nav-link">阅读</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div> <a href="https://github.com/Sunflowerjing/Sunflowerjing.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Dev</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>TS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>三大框架</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>小程序</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/微信小程序基础概念.html" class="active sidebar-link">微信小程序基础概念</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/微信小程序基础概念.html#目录结构" class="sidebar-link">目录结构</a></li><li class="sidebar-sub-header"><a href="/blog/微信小程序基础概念.html#注册小程序-app-js" class="sidebar-link">注册小程序(app.js)</a></li><li class="sidebar-sub-header"><a href="/blog/微信小程序基础概念.html#组件" class="sidebar-link">组件</a></li><li class="sidebar-sub-header"><a href="/blog/微信小程序基础概念.html#控制-tabbar-显示或者隐藏" class="sidebar-link">控制 tabBar, 显示或者隐藏</a></li><li class="sidebar-sub-header"><a href="/blog/微信小程序基础概念.html#input标签" class="sidebar-link">input标签</a></li><li class="sidebar-sub-header"><a href="/blog/微信小程序基础概念.html#storage" class="sidebar-link">Storage</a></li><li class="sidebar-sub-header"><a href="/blog/微信小程序基础概念.html#用户id-包括openid和unionid" class="sidebar-link">用户ID(包括openid和unionid)</a></li><li class="sidebar-sub-header"><a href="/blog/微信小程序基础概念.html#预览图片" class="sidebar-link">预览图片</a></li><li class="sidebar-sub-header"><a href="/blog/微信小程序基础概念.html#获取-openid" class="sidebar-link">获取 openID</a></li></ul></li><li><a href="/blog/微信小程序图片上传、预览、删除.html" class="sidebar-link">微信小程序图片上传、预览、删除</a></li><li><a href="/blog/微信小程序自动发布.html" class="sidebar-link">微信小程序自动发布</a></li><li><a href="/blog/小程序监控体系.html" class="sidebar-link">小程序监控体系</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>node</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>打包工具</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>工程化&amp;性能优化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>网络协议</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>正则</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="微信小程序基础概念"><a href="#微信小程序基础概念" class="header-anchor">#</a> 微信小程序基础概念</h1> <ul><li><code>wx:if</code> 和 <code>hidden</code> 都可以用来做判断:
<ul><li><code>hidden</code> 无论是否为真，都会渲染到页面中。<code>wx:if</code> 相应的则不会被渲染到页面中。如果没有频繁的切换，则使用<code>wx:if</code>会较好些。</li> <li>修改 WX小程序中的数据需要用 <code>setData</code> 更新数据。</li></ul></li></ul> <ol><li><code>bindtap</code>触发的点击函数, 里面的<code>dataset</code>属性,可以获取到组件节点中附加一些自定义数据。</li></ol> <div class="language- extra-class"><pre class="language-text"><code>wxml文件
&lt;view data-alpha-beta=&quot;1&quot; data-alphaBeta=&quot;2&quot; bindtap=&quot;bindViewTap&quot;&gt; DataSet Test &lt;/view&gt;

js文件
Page({
  bindViewTap:function(event){
    event.currentTarget.dataset.alphaBeta === 1 //  大写会转为小写
    event.currentTarget.dataset.alphabeta === 2 //  - 会转为驼峰写法
  }
})
</code></pre></div><h2 id="目录结构"><a href="#目录结构" class="header-anchor">#</a> 目录结构</h2> <ol><li>小程序包含一个<strong>描述整体程序的 app</strong> 和多个<strong>描述各自页面的 page</strong>。</li> <li>一个<strong>小程序主体</strong>部分由三个文件组成，必须放在项目的根目录，如下：
<ul><li>app.js(小程序逻辑)</li> <li>app.json(小程序公共配置, 例如页面入口)  在微信开发者工具中，打开小程序的<strong>项目目录</strong>中，必须包含app.json。即 <strong>src &gt; pages、app.json</strong>，打开 src 文件夹。</li> <li>app.wxss(小程序公共样式表)</li></ul></li> <li>一个<strong>小程序页面</strong>由四个文件组成，分别是：
<ul><li>.js(页面逻辑)</li></ul> <div class="language- extra-class"><pre class="language-text"><code>JS 只需要管理状态即可:  this.setData({ msg: &quot;Hello World&quot; })

页面(page)中的 js: Page({})
组件(components)中的 js: Component({})
APP 中的 js: App({})
</code></pre></div><ul><li>.wxml(页面结构)</li></ul> <div class="language- extra-class"><pre class="language-text"><code>WXML 是这么写:  &lt;text&gt;{{msg}}&lt;/text&gt;
</code></pre></div><ul><li>.json(页面配置)</li> <li>.wxss(页面样式表)</li> <li><strong>注意：为了方便开发者减少配置项，描述页面的四个文件必须具有相同的路径与文件名。</strong></li></ul></li></ol> <h2 id="注册小程序-app-js"><a href="#注册小程序-app-js" class="header-anchor">#</a> 注册小程序(app.js)</h2> <ol><li>每个小程序都需要在 app.js 中调用 App 方法注册小程序实例。<strong>App(Object object)</strong>, 接受一个 Object 参数，其指定小程序的生命周期回调等。<strong>App() 必须在 app.js 中调用，必须调用且只能调用一次。不然会出现无法预期的后果。</strong></li> <li>绑定生命周期回调函数、错误监听和页面不存在监听函数等。</li></ol> <div class="language- extra-class"><pre class="language-text"><code>// app.js
App({
  onLaunch (options) {
    // 生命周期回调——监听小程序初始化完成时触发，全局只触发一次。
  },
  onShow (options) {
    // 生命周期回调——监听小程序启动或切前台。
  },
  onHide () {
    // 生命周期回调——监听小程序切后台。
  },
  onError (msg) {
    console.log(msg);  // 错误监听函数。
  },
  onPageNotFound() {
      // 页面不存在监听函数。
  },
  onUnhandledRejection() {
      // 未处理的 Promise 拒绝事件监听函数。
  },
  onReachBottom: function() {
    // 监听用户上拉触底事件
  },
  globalData: 'I am global data'
})
</code></pre></div><ol start="3"><li>整个小程序只有一个 App 实例，是全部页面共享的。</li> <li>开发者可以通过 getApp 方法获取到全局唯一的 App 实例</li> <li>获取App上的数据或调用开发者注册在 App 上的函数。</li></ol> <div class="language- extra-class"><pre class="language-text"><code>const appInstance = getApp()
console.log(appInstance.globalData) // I am global data
</code></pre></div><h2 id="组件"><a href="#组件" class="header-anchor">#</a> 组件</h2> <ol><li>组件中的 .js 写法</li></ol> <div class="language- extra-class"><pre class="language-text"><code>Component({
    // 组件的对外属性，是属性名到属性设置的映射表
    properties: {   
        myProperty: { // 属性名
            type: String,  // 属性的类型
            value: ''    // 属性的初始值
        },
        myProperty2: String // 简化的定义方式
    },
    // 组件的内部数据，和 properties 一同用于组件的模板渲染
    data: {

    },
    // 组件的方法
    methods: {
        click() {
            // 组件之间的通信 
            this.triggerEvent('page中bind后面的事件名，例如: bind:searchList123',则为: searchList123。);
        }
    }
})
</code></pre></div><ol start="2"><li>组件触发页面中的方法，用 <strong>this.triggerEvent('页面中 bind 后面的名字')</strong>。重点</li> <li>在组件的.json 文件中,写入以下内容</li></ol> <div class="language- extra-class"><pre class="language-text"><code>{
    &quot;component&quot;: true
}
</code></pre></div><ol start="4"><li>在引入组件的页面中,.json 应该如下配置</li></ol> <div class="language- extra-class"><pre class="language-text"><code>{
  &quot;usingComponents&quot;: {
        &quot;SearchBar&quot;: &quot;/components/searchBox/searchBox&quot;,
  }
}
</code></pre></div><ol start="5"><li>若要使用微信的扩展组件，即 WeUI 组件库, 需要下载https://developers.weixin.qq.com/miniprogram/dev/extended/weui/download.html</li></ol> <h2 id="控制-tabbar-显示或者隐藏"><a href="#控制-tabbar-显示或者隐藏" class="header-anchor">#</a> 控制 tabBar, 显示或者隐藏</h2> <div class="language- extra-class"><pre class="language-text"><code>1. 显示
wx.showTabBar({
    animation: true   // 动画
});
2. 隐藏
wx.hideTabBar({
    animation: true
});
</code></pre></div><h2 id="input标签"><a href="#input标签" class="header-anchor">#</a> input标签</h2> <div class="language- extra-class"><pre class="language-text"><code>1. bindfocus: 输入框聚焦时触发
2. bindinput: 键盘输入时触发
3. bindconfirm: 点击完成按钮时触发
4. bindblur: 输入框失去焦点时触发

以上方法，都会有event.detail={}参数
</code></pre></div><h2 id="storage"><a href="#storage" class="header-anchor">#</a> Storage</h2> <ol><li>wx.setStorage({})。将数据存储在本地缓存中指定的 key 中。会覆盖掉原来该 key 对应的内容。</li></ol> <div class="language- extra-class"><pre class="language-text"><code>wx.setStorage({
   key: 'openId',
   data:&quot; 123456789&quot;
})
</code></pre></div><ol start="2"><li>wx.getStorage({})。从本地缓存中异步获取指定 key 的内容。</li></ol> <div class="language- extra-class"><pre class="language-text"><code>wx.getStorage({
  key: 'openId',
  success (res) {
    console.log(res.data)
  }
})
</code></pre></div><h2 id="用户id-包括openid和unionid"><a href="#用户id-包括openid和unionid" class="header-anchor">#</a> 用户ID(包括openid和unionid)</h2> <ol><li><code>openId</code>是来区分<code>用户唯一标识</code>。</li> <li>openid<code>同一个应用</code>（App、公众号、小程序）的<code>同一个用户</code>有<code>唯一的openid</code>。</li> <li>如果开发者<code>拥有多个移动应用、网站应用、和公众帐号（包括小程序）</code>, 可通过 <code>UnionID</code>来区分用户的唯一性，<code>因为只要是同一个微信开放平台帐号下的移动应用、网站应用和公众帐号（包括小程序）</code>，用户的 UnionID 是唯一的。换句话说，<code>同一用户，对同一个微信开放平台下的不同应用，unionid是相同的</code>。</li> <li>同一个用户，在你的多个应用中，<code>openid</code>可能都不相同；但是，<code>unionid</code>一定会相同的。</li></ol> <h2 id="预览图片"><a href="#预览图片" class="header-anchor">#</a> 预览图片</h2> <ol><li>wx.previewImage({})
在新页面中全屏预览图片。预览的过程中用户可以进行保存图片、发送给朋友等操作。</li></ol> <div class="language- extra-class"><pre class="language-text"><code>wx.previewImage({
  current: '', // 当前显示图片的http链接
  urls: [] // 需要预览的图片http链接列表
})
</code></pre></div><h2 id="获取-openid"><a href="#获取-openid" class="header-anchor">#</a> 获取 openID</h2> <div class="language- extra-class"><pre class="language-text"><code>wx.login({
    success: function(res){
        wx.request({
            url: '请求后端',  //接口地址
            method: 'POST',
            header: {
                'content-type': 'applicaiton/x-www-form-urlencoded' // 默认值 application/json
            },
            data: {
                code:res.code, //微信下发临时登录凭证
            },
            success: function (openIDRes) {
                console.log(openIDRes);
                if(openIDRes.status === 0){
                    wx.setStorage({
                        key: 'openId',
                        data: openIDRes.data.openId
                    })
                }
            }
        })
    }
})
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/mobx.html" class="prev">mobx</a></span> <span class="next"><a href="/blog/微信小程序图片上传、预览、删除.html">微信小程序图片上传、预览、删除</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.0c4e457a.js" defer></script><script src="/assets/js/2.3676e543.js" defer></script><script src="/assets/js/88.45337485.js" defer></script>
  </body>
</html>
