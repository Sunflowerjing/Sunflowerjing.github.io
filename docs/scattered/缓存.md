# 缓存

## 闭包实现缓存
* 在`JavaScript`中，所有`函数都能访问它们上一层的作用域`。所以在父函数里定义子函数，子函数能访问父函数的变量。子函数就相当于闭包。
1. 判断当前为`IOS` 还是 `Adr`环境
```javascript
const systemType = (function(){
    let ret = void 0;
    return function(){
        if (typeof ret === 'string') {   
            return ret;
        }
        const ua = navigator.userAgent;
        const isAndroid = /(Android|Adr)/i.test(ua); //android终端
        const isiOS = /(iPhone|iPad|iPod|iOS)/i.test(ua); //ios终端
        if(isAndroid){
            return ret = 'Android'
        } else if(isiOS){
            return ret = 'iOS'
        }
            return ret = '';
        }
})();
```


2. JS获取指定的cookie值, 并且获取过的要缓存
```javascript
var DC = "_ga=GA1.1.1156043154.1589512747; _gat=333结果"; // 模拟 cookie
var getCookie = (function(){
    var ret = {};
    return function(cookie){
       if(ret[cookie]){
           return ret[cookie];
       }
       var name = cookie + '=';
       var cookieList = DC.split(';');
       for(var i=0; i<cookieList.length; i++){
           var cookieArr = cookieList[i].trim();
           if(cookieArr.indexOf(name)==0){
                var str = cookieArr.substring(name.length, cookieArr.length);
                ret[cookie] = str;
                return str;
           }
       }
       return '';
   }
})()
```