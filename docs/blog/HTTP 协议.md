# HTTP 协议




## HTTP 协议详解
1. 请求模型
    * client 请求 <=> 响应 server
2. HTTP 超文本传输协议
3. 7层应用: 应用层、表示层、会话层、传输层、网络层、数据链路层、物理层。
4. 4层应用: 应用层、传输层、网络层、网络接口层。
    * 应用层: 为用户提供所需的各种服务。例如: `HTTP`、FTP、DNS、SMTP 等。
    * 传输层
        * 为应用层实体提供断到端的通信功能，保证数据包的顺序传送及数据的完整性。
        * 该层定义了两个主要的协议: 传输控制协议(TCP) 和 用户数据协议(UDP)
    * 网络层
        * 主要解决主机到主机的通信问题。IP 协议是网际互联层最重要的协议。
    * 网络接口层
        * 负责监视数据在主机和网络之间的交换
5. HTTP 默认端口号为 `80`
6. HTTPS 默认端口号为 `443`
7. `TCP/IP` 协议在栈中的位置
    * HTTP(TLS、SSL) => TCP => IP => 数据链路层
8. HTTP 的工作过程，分为以下4步骤
    (1) 首先客户端与服务器**建立链接**。只要单击某个超级链接，HTTP的工作开始。=>  创建链接在 TCP 层完成
    (2) 创建链接后，**客户端发送一个请求给服务器**，请求方式为: 统一资源标识符(URL)、协议版本号，后边是 MIME 信息包括请求修饰符、客户机信息和可能的内容。
    (3) 服务器接受到请求后，给予相应的**响应信息**，其格式为一个状态行，包括信息的协议版本号、一个成功或错误代码，后边是 MIME 信息包括服务器信息、实体信息和可能的内容。
    (4) 客户端接收服务器所返回的信息通过浏览器**显示在用户的显示屏**上，然后客户机与服务器断开链接。




## 请求和响应
1. HTTP 请求组成: 请求行，消息报头、请求正文。
    * 请求行: (1)请求方法 post (2)请求URL/api/user.html (3)HTTP协议及版本 http/1.1
    * 消息报头: 键值对的形式
    * 请求正文: get是没有请求数据。post才有请求数据
2. HTTP 响应组成: 状态行、消息报头、响应正文。
    * 状态行: (1)报文协议及版本(HTTP/1.1) (2)状态码及状态描述 (200 OK) 
    * 消息报头: 键值对的形式
    * 响应体: 
3. 请求行组成: 以一个方法符号开头，后面跟着请求的 URL 和 协议的版本
4. 状态行组成: 服务器 HTTP 协议的版本，服务器发回的响应状态代码和状态代码的文描述。


## HTTP 状态码
1. 1XX: 指示信息 - 表示请求已接收、继续处理
2. 2XX: 成功 - 表示请求已被成功接收
3. 3XX: 重定向 - 要完成请求必须进行更近一步的操作
4. 4XX: 客户端错误 - 请求有语法错误或者请求无法实现
    * 401: 错误代表用户没有访问权限，需要进行身份认证。
5. 5XX: 服务器端错误 - 服务器未能实现合法请求

## cookies 和 session
1. cookies  是保存在客户端的小段文本, 随客户端点每一个请求发送该 URL 下的所有 cookies 到服务器端。
    * 客户端 和 服务器一起维护
    * 客户端将服务器设置的 Cookie 返回到服务器
    * set-cookie: 服务器向客户端设置 Cookie
2. session 则保存在服务器端，通过唯一的值 sessionID 来区别每一个用户。sessionID 随每个链接请求发送到服务器，服务器根据 sessionID 来识别客户端，在通过 session 的 key 获取 session 的值。
    * 服务器维护
3. 
4. 
5. 
